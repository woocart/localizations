sudo: required

# Only run builds for PRs and commits into master
branches:
  only:
    - master

language: python
python:
 - 3.7
dist: xenial

addons:
  apt:
    packages:
      - aspell
      - aspell-en
      - aspell-ro
      - aspell-sl

env:
  global:
  - PIPENV_VENV_IN_PROJECT=1
  - PIPENV_IGNORE_VIRTUALENVS=1

install:
 - pipenv install --deploy && touch .installed

script:
 - pipenv run black .travis/validate.py --check
 - make lint
 - make types
 - make validate

cache:
  directories:
  - $HOME/.pyenv_cache
  - $HOME/.cache/pip/http/
  - $HOME/.cache/pipenv/wheels/
  - $HOME/.cache/pipenv/http/
